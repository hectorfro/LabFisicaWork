\chapter{Representación de los datos y el análisis gráfico}

\section{Introducción}

En este capítulo, se aprenderá cómo representar datos experimentales de manera efectiva mediante gráficos. Se abordarán técnicas para la creación de gráficos claros y comprensibles, así como para el análisis de datos a través de regresión lineal y la interpretación de pendientes e intersecciones.

Para el científico, analista de datos o persona con la responsabilidad  de escribir documentos técnicos es importante que desarrolle competencias en las técnicas de visualización de datos. Las presentaciones con gráficos deben ser claras, atractivas y sobre todo convincentes, muchas veces deben lograr traducir cantidades numéricas a ideas que permitan hacer extrapolaciones y proyecciones a situaciones futuras. Las técnicas de visualización de datos termina siendo algo que se aprende con el oficio, con el día a día del trabajo de investigación y pocas veces se enseña en las universidades

El propósito de este capítulo es hacer una pequeña introducción sobre visualización de datos y como usarlos en el análisis de los datos experimentales. 

\section{Tabulación de datos y resultados}

La Física es una ciencia experimental y cuantitativa, depende del trabajo de laboratorio donde se tendrá la necesidad de medir magnitudes y procesar datos.

Es una norma básica que dichos datos deben ser presentados en forma clara y ordenada, y la mejor forma para lograr esto es ubicar los datos en tablas, donde se destinen diferentes columnas a cada conjunto de datos. Conocer en qué consiste la tabulación de los datos y cómo hacerlo correctamente puede resultar de gran ayuda a la hora de realizar las diferentes etapas de  procesamiento y visualización, facilita considerablemente la comprensión, el análisis y la interpretación de los datos para llevar a cabo comparaciones y obtener conclusiones válidas. 

Las ventajas de este proceso de tabulación son las siguientes:
\begin{enumerate}
\item Cumplir con condiciones de claridad y orden.
\item Facilitar la lectura y la comprensión de los datos.
\item Reducir las posibilidades de equivocación al tomar valores para calcular.
\end{enumerate}

Las Tablas deben ser lo más autocontenidas posibles, sus títulos y  leyendas deben ser suficiente para explicar su contenido. Las leyendas de tablas y figuras deben ser más que una simple descripción. Deben generar una reflexión una conclusión al presentar la tabla o figura. En textos científicos las tablas deben ser referidas desde el texto (ver Tabla \ref{ejetabla1}). Si no se hace referencia a una tabla en particular, ésta se considera inútil para el artículo y debe ser eliminada.

La confección de tablas de valores no se limita necesariamente a los datos que se recogen directamente en el trabajo experimental, sino que puede extenderse a los resultados de efectuar operaciones con dichos datos. Además en dichas tablas, deben disponerse columnas para colocar en ellas el error con el cual dichas magnitudes han sido medidas, siempre que este sea diferente en cada medición.

Las tablas en las que se recopilan y se organizan los datos deben contar con las siguientes partes:
\begin{itemize}
\item Título de la tabla: debe ser breve, conciso y claro.
\item Contenido de la tabla:  deben aparecer las magnitudes con sus respectivos nombres y unidades, preferiblemente  en el mismo sistema de unidades.
\item Número de la tabla.
\item Notas explicativas: hacer referencia a la fuente de los datos, explicación de las abreviaturas, consideraciones a tener en cuenta, etc. 
\end{itemize}

Como ejemplo de lo dicho anteriormente se presenta una tabla de valores obtenida en una experiencia de movimiento rectilíneo uniformemente acelerado, ver tabla \ref{ejetabla1}

\begin{table}[!h]
\centering
\caption{Velocidad de carrera sobre 200$ \mathrm{~m}$ y distancia de salto de longitud  de un grupo de personas seleccionadas al azar.}
\begin{tabular}{ccc}
\hline Participante & Velocidad $\left(\mathrm{ms}^{-1}\right)$ & Distancia $(\mathrm{m})$ \\ \hline \hline 
1 & 10.53 & 2.38 \\
2 & 11.16 & 1.83 \\
3 &  9.54  & 2.04 \\
4 & 15.77 & NA\footnote{El participante 4 no pudo realizar el salto de longitud  por razones médicas} \\
5 & 12.82 & 1.74 \\
& & \\
Total & 59.82 & 7.99 \\
Promedio & 11.964 & 1.997 \\
\hline
\end{tabular}
\label{ejetabla1}
\end{table}


\section{Representaciones  gráficas}

La representación de gráficas o la visualización de datos es una técnica artística que permite transmitir el conocimiento científico. Con la visualización de datos se debe transmitir de manera precisa la información científica relevante sin distorsionar su contenido. No debe contener información falsa ni errónea. Es necesario que la visualización sea agradable desde el punto de vista estético, si las figuras se muestran con colores poco armónicos, elementos visuales engorrosos traerá como consecuencia que el espectador no pueda interpretar la figura de manera correcta. 

\begin{figure}[t]
\begin{center}
\includegraphics[height=2.5in,width=3.6in]{figuras/fig08}  
\caption{En (a) se muestra  un diagrama de barras para tres valores: A = 3, B = 5 y C = 4;  es una representación sencilla y entendible. (b) es una versión fea de la parte (a), aunque el gráfico es técnicamente correcto, es estéticamente desagradable, con colores innecesarios, una cuadrícula de fondo absurda y un texto con tipos de letra y tamaños diferentes. (c) es una mala versión de la parte (a), en el eje $y$ cada barra tiene  su propia escala y además están desalineadas, por lo tanto es una gráfica engañosa. (d) es una versión incorrecta de la parte (a), como el eje $y$ no pose escalas no es posible determinar sus valores numéricos.}
\label{estilosfig}
\end{center}
\end{figure}

En muchos casos, una acertada visualización de datos  permite determinar valores que no han sido obtenidos experimentalmente, como son:
\begin{enumerate}
\item Valores entre puntos experimentales (proceso de Interpolación).
\item Valores fuera del intervalo experimental (proceso de Extrapolación).
\item Valores de los parámetros constantes de la función matemática usada.
\end{enumerate}

En la figura \ref{estilosfig}\footnote{Tomada de: \url{https://clauswilke.com/dataviz/}.} podemos ver algunos ejemplos  de cómo hacer una buena visualización y otras como ejemplos de cómo no hacerla.  Una figura  que muestre problemas estéticos pero que cumple con su función de ser clara e informativa es una figura que podríamos llamar ``fea''. Una figura ``mala'' es aquella que es poco clara, confusa, complicada, engañosa, mientras que una figura ``incorrecta'' es aquella que presenta información errónea, presenta inconsistencias matemáticas que inevitablemente llevará a una interpretación equivocada de los datos.



Cuando se grafican valores experimentales o magnitudes calculadas se debe considerar:

\subsection{Ejes de coordenadas}

En muchas casos, cuando se quiere visualizar datos se necesita definir escalas que permitan posicionar los datos en un gráfico. En gráficos 2D se necesitan dos números para especificar un punto de manera unívoca, es decir, dos escalas de posición. Estas dos escalas suelen ser los ejes $x$ (eje horizontal o eje de las abscisas) y el eje $y$ (eje vertical o eje de las ordenadas), es lo generalmente  se denomina el sistema de coordenadas.

\begin{enumerate}
\item En los ejes deben aparecer claramente las magnitudes, símbolo o letra, que en ellos se representan y sus unidades de medida correspondientes

\item En los ejes sólo deben colocarse los valores más representativos de la escala escogida.

\item En general, es conveniente que el origen aparezca en el gráfico, pero no siempre es necesario que la intersección de los dos ejes corresponda al punto cero; en este caso las escalas pueden desplazarse cuando los datos experimentales están en un intervalo que así lo requiera.

\item La variable independiente, cuyo valor lo asigna a conveniencia el experimentador, se representa sobre el eje $x$ horizontal y la variable que depende de ese valor asignado se coloca sobre el eje $y$ vertical.
\end{enumerate}
\begin{figure}[t]
\begin{center}
\includegraphics[height=2.5in,width=3.6in]{figuras/fig09}  
\caption{Muy mala selección de las escalas.}
\label{escala1}
\end{center}
\end{figure}


\subsection{Selección de escalas}
La escogencia de las escalas a utilizar es un problema si no se tiene cuidado al considerar factores como: el tamaño del conjunto de datos, las divisiones sobre cada eje, la relación entre los errores experimentales y los valore mínimos elegidos en las escalas. 

Las escala no deben ser muy pequeña, ya que en este  caso se  pueden agrupar exageradamente los puntos en una región de la gráfica (ver figura \ref{escala1}). Tampoco deben elegirse escalas grandes que exageran la precisión.

Una gráfica puede requerir  tener dos ejes que representan dos unidades diferentes, por ejemplo Temperatura en $^\circ$C vs Tiempo en s.  Estirar o comprimir los ejes obedecerá a las razones que necesitemos resaltar, una gráfica alta y estrecha enfatiza el cambio a lo largo del eje $y$ y una corta y ancha hace lo contrario. Lo ideal es elegir una relación de aspecto que garantice que las diferencias importantes de posición sean perceptibles.

Por otro lado, si los ejes $x$ y $y$ se miden en las mismas unidades, entonces las separaciones de la cuadrícula para los dos ejes deben ser iguales, de forma que la misma distancia a lo largo del eje $x$ o $y$ corresponda al mismo número de unidades de datos.

Los sistemas de coordenadas cartesianos son sistemas de coordenadas lineales y aunque 
suelen proporcionar una representación precisa de los datos, hay situaciones en las que se prefiere utilizar escalas no lineales. En una escala no lineal, a un espaciado uniforme en las unidades de datos le corresponde un espaciado desigual en la visualización o, contrariamente, a un espaciado uniforme en la visualización le corresponde un espaciado desigual en las unidades de datos.

La escala no lineal más utilizada es la escala logarítmica o escala logarítmica abreviada, estas escalas  son lineales en la multiplicación, de forma que un paso unitario en la escala corresponde a una multiplicación con un valor fijo. Para crear una escala logarítmica, debemos realizar una transformación logarítmica de los valores de los datos y exponenciar los números que se muestran a lo largo de las líneas de la cuadrícula del eje.

\begin{figure}[t]
\begin{center}
\includegraphics[height=2.2in,width=4.6in]{figuras/fig11}  
\caption{Representación de puntos experimentales con barras de error.}
\label{barerror}
\end{center}
\end{figure}

\subsection{Ubicación de los puntos}

Los valores experimentales no deben ser graficadas sólo como un solo punto, se debe representar además el error absoluto con el cual se obtuvo dicho valor. Para ello se usan: cuadrados, rectángulos, barras, cruces, etc. (ver figura \ref{barerror}). Si la escala escogida no permite representar el error absoluto, los valores experimentales se deben representar con una equis o una cruz. Las barras de error suelen representarse a lo largo de las direcciones $x$ y  $y$ en un gráfico de dispersión.

En las figuras 2D sencillas, las barras de error tienen una ventaja importante sobre las representaciones más complejas de la incertidumbre ya que se pueden combinar con muchos otros tipos de gráficos. Por lo tanto, las barras de error resultan ser la representaciones más sencillas para mostrar cantidades con incertidumbre sobre todo en las gráficas de barras. 

Cada conjunto debe ser representado por un símbolo diferente, por ejemplo: $\times, \Delta, \odot,+$ e identificar luego cada curva. La recta o curva que siguen los puntos se debe trazar de un modo que la función sea lo más representativa posible del comportamiento de las magnitudes que caracterizan el fenómeno  en estudio.



\section{Análisis Gráfico de Funciones}
En el análisis de un experimento generalmente se dispone de un conjunto de datos que de acuerdo a la teoría del fenómeno en estudio debe corresponder a una cierta ley física. ley  que se expresa mediante una ecuación matemática.  Este análisis se puede lograr graficando los valores experimentales que seguramente seguirán una cierta curva que corresponde a la tendencia de los puntos.  La idea es comparar la forma de la curva obtenida por la mediciones con la predicha por la teoría. Si la comparación muestran la misma tendencia se concluye que esto es una comprobación experimental de la teoría considerada.

Como es más fácil obtener la información de un gráfico lineal, entonces se procede a elegir convenientemente las variables de modo de obtener una función lineal. A continuación se mostrará como algunas de las funciones más conocidas pueden ser llevadas a un gráfico lineal.

\subsection{Función lineal}
En algunos experimentos las magnitudes físicas pueden variar linealmente, como es el caso de la deformación y la fuerza en la ley de Hooke $(F = -kx)$. Al realizar el experimento y graficar resulta  un conjunto de puntos que corresponde a un comportamiento lineal. 

El experimentador tiene que buscar ahora la mejor estrategia  para trazar la mejor recta que pasa por entre los puntos experimentales.

Los métodos estadísticos demuestran que, siempre que la dispersión de los puntos experimentales  se deba a los errores casuales de medición, la mejor recta pasará por el centroide de los puntos experimentales, que es el punto con las coordenadas
$(\bar{x}, \bar{y})$, en donde $\bar{x}$ y $\bar{y}$  son los  valores medios de las coordenadas $x$ y $y$ respectivamente.
\begin{equation}
\begin{aligned}
\bar{x} & =\frac{1}{n}{\sum_{i=1}^n x_i} \\
\bar{y} & =\frac{1}{n}{\sum_{i=1}^n y_i}
\end{aligned}
\end{equation}

Para ajustar la recta al conjunto de puntos experimentales, se puede recurrir al método del centroide.  Este método es un método artesanal, y consiste en buscar sobre la gráfica la mejor recta que pase  por el centroide y la mayoría de los puntos experimentales. Aquellos puntos que queden por fuera de esta recta deben estar distribuidos en lo posible con igual peso a ambos lados de la curva.

Como sabemos, la ecuación de una recta es:
$$
y=m x+b
$$
donde:
\begin{itemize}
\item $m$ es la pendiente de la recta, calculada a partir de las coordenadas de dos puntos sobre la recta, necesariamente no tienen que corresponder a valores experimentales.
$$
m=\frac{\left(y_2-y_1\right)}{\left(x_2-x_1\right)} \frac{\text { unidad de } y}{\text { unidad de } x}
$$
\item  $b$ es el corte de la recta con el eje de las ordenadas en $x=0$.
\end{itemize}

El error absoluto para $m$ y $b$ viene dado por la lectura de la posición de los puntos sobre el gráfico, es decir en función de la apreciación de la escala en el eje respectivo.



\subsection{Función exponencial}
Dada la función 
\begin{equation}
y(x)=k a^{b x}
\label{funexp}
\end{equation}
donde $k, a$ y $b$ son constantes. Si  $b>0$  la exponencial es creciente, mientras que si si $b < 0$, la exponencial es decreciente. Notemos  que en $x=0$, $y=k$, por lo que $k$ resulta ser la ordenada al origen, es decir, la curva intercepta al eje de las ordenadas en el punto $(0, k)$.

Tomando logaritmos se tiene:
\begin{equation}
\log (y)=b \log(a) x +\log (k)
\label{funexplin}
\end{equation}
Recordemos que si por ejemplo $a=10$ debemos tomar  logaritmo en base diez. 

Si hacemos una gráfica directamente $\log y$ en función de $x$  se obtendrá una recta, pero para ello habría que calcular los logaritmos de $y$. Este cálculo puede ser evitado usando un papel especial llamado papel semi-logarítmico, en el cual uno de los ejes tiene las divisiones proporcionales a los logaritmos decimales y el otro es lineal. 

En la escala logarítmica existen ciclos, donde un ciclo corresponde al conjunto de números entre dos potencias de diez (1 a $10; 10$ a $100; 100$ a 1000 ó 0,1 a 1; etc.).

El gráfico de la función $y=k a^{bx}$ es una recta porque la ecuación (\ref{funexplin}) puede ser escrita como
$$
u=m x+v \,,
$$
donde: $u =\log(y)$,  $m =b \log(a)$ y  $v=\log (k)$.

Para calcular la pendiente de la recta hay que considerar que se está trabajando con logaritmos:
$$
\text {pendiente}=m=\frac{u_2-u_1}{x_2-x_1}  =\frac{\log y_2-\log y_1}{x_2-x_1}=b \log a
$$

Es de hacer notar que al graficar en papel semi-logarítmico y llevar los valores en la escala logarítmica, se llevan directamente los números a la escala y no se calculan los logaritmos, pero al calcular la pendiente si es necesario hacerlo. Además si se está utilizando papel semi-logarítmico, $k$ es el corte de la recta en $x=0$.

En las siguientes lineas de código se puede interpretar lo expuesto anteriormente tomando la función exponencial siguiente:
$$
y = 5\cdot 10^{\frac{x}{3}}
$$
cuya gráfica la podemos hacer de la manera siguiente
\begin{lstlisting}[language=Python] 
x = np.arange(10)
y = 5*10**(1/3*x)
plt.plot(x, y, 'o')
plt.show()
\end{lstlisting}
\begin{figure}[h]
\begin{center}
\includegraphics[height=2.4in,width=2.9in]{figuras/fig14}  
\label{figexp1}
\end{center}
\end{figure}

Ahora la función lineal pero en escala logarítmica
\begin{lstlisting}[language=Python] 
plt.plot(x, y, '-o')
plt.yscale("log")
plt.show()
\end{lstlisting}
\begin{figure}[h]
\begin{center}
\includegraphics[height=2.4in,width=2.9in]{figuras/fig15}  
\label{figexp1lin}
\end{center}
\end{figure}

\newpage
\subsection{Función potencial}
Dada la función:
\begin{equation}
y= c x^m
\label{funpot}
\end{equation}
donde $m$ y $c$ son constantes. 

Tomando logaritmos decimales  se tiene:
\begin{equation}
\log (y)=m \log (x)+\log (c)
\label{funpotlin}
\end{equation}

Si se hace una gráfica directamente $\log y$ en función de $\log x$ se obtendrá una recta, pero habría que calcular los logaritmos decimales de $y$ y de $x$. Esto se puede  evitar  usando un papel especial llamado papel logarítmico (comúnmente llamado $\log-\log$ ), el cual tiene ambas escalas proporcionales a los logaritmos decimales.

El gráfico de la función $y=c x^m$ es una recta porque la ecuación (\ref{funpotlin}) se puede escribir como:
$$
v=m u+k \,,
$$
donde: $v =\log(y) $, $u=\log(x) $ y $k=\log(c)$

La pendiente $m$ de la recta está dada por:
$$
m =\frac{v_2-v_1}{u_2-u_1}  =\frac{\log y_2-\log y_1}{\log x_2-\log x_1}=\frac{\log \left(\frac{y_2}{y_1}\right)}{\log \left(\frac{x_2}{x_1}\right)}
$$
y $c$ representa el corte de la recta en $x=1(\log 1=0)$.

Consideremos la  función potencial siguiente:
$$
y = 8\ x^{3}
$$

Procedemos a realizar su gráfica:
\begin{lstlisting}[language=Python] 
x = np.arange(20)
y = 8*x**(3)
plt.plot(x, y, '*')
plt.show()
\end{lstlisting}
\begin{figure}[h]
\begin{center}
\includegraphics[height=2.4in,width=2.9in]{figuras/fig16}  
\label{figexp1}
\end{center}
\end{figure}
\newpage

Ahora la función lineal pero en escala log-log
\begin{lstlisting}[language=Python] 
plt.plot(x, y, '-*')
plt.xscale("log")
plt.yscale("log")
plt.show()
\end{lstlisting}
\begin{figure}[h]
\begin{center}
\includegraphics[height=2.4in,width=2.9in]{figuras/fig17}  
\label{figexp1lin}
\end{center}
\end{figure}



